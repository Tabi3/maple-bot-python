from Maple_bot_functions.ExternalLibraries import *
from Maple_bot_functions.MapleHelpCommand import Maple_help

def get_prefix(_client, message):
    with open('./json/prefixes.json', 'r') as f:
        try:
            return json.load(f)[str(message.guild.id)]
        except Exception:
            return ";"

class myClient(commands.Bot):
    def __init__(self, cp=get_prefix, description = None, **options):
        os.chdir("./Maple")
        super().__init__(cp, Maple_help(), description = description, **options)
        [self.load_extension(f"cogs.{j}.{i[:-3]}") for j in os.listdir("./cogs") for i in os.listdir(f"./cogs/{j}") if i.endswith(".py")]
        self.my_run()
        return self
    
    
    def my_run(self):
        self.run("ODQxMzYyMDg2NjY2OTYwOTI2.GUdaKW.duTMvpMn_CYbPfaQk7F6DuBY25VahseMfjQQlg")
        return self
    
    
    def reload_all(self):
        [self.reload_extension(f"cogs.{j}.{i[:-3]}") for j in os.listdir("./cogs") for i in os.listdir(f"./cogs/{j}") if i.endswith(".py")]